Tmux – терминальный мультиплексор
=================================

:date: 2022-05-06
:summary: Описание лабы
:status: published
:author: Гусева Ю. О.

.. default-role:: code
.. contents:: Содержание

Tmux — это консольная утилита, предоставляющая пользователю доступ к
нескольким терминалам в рамках одного экрана. Простыми словами,
используя эту утилиту можно в одном окне открыть несколько терминальных
окон. Также возможно подключение к существующей сессии из другого
рабочего места не прерывая выполнение определенных задач.

.. image:: {static}/images/tmux/01.png
    :alt: 01

Как видно из скриншота, у нас несколько консольных панелей в одном окне.
Очень удобно работать. Приступим к более подробному рассмотрению. Для
установки tmux утилиты в операционной системе Centos достаточно
выполнить команду:

.. code:: bash

    yum install tmux

После установки программы можно приступать к использованию

Вводим команду:

.. code:: bash

    tmux или tmux new

Создается новая сессия, в которой будем дальше работать. Понять, что мы
находимся в tmux можно по наличию зеленой строки внизу консоли, на
которой размещены дата и время.

.. image:: {static}/images/tmux/02.png
    :alt: 02

Сессия позволяет создать отдельное поле для работы над какой-либо задачей,
каждая сессия работает отдельно от другой.

**Команды для работы с сессиями**

.. table::

+----------------------------------------+--------------------------------------+
| Cочетание клавиш                       | Действие                             |
+========================================+======================================+
| Ctrl+b, d                              | Отключение от сессии                 |
+----------------------------------------+--------------------------------------+
| Сtrl+b, s                              | Переключение между сессиями          | 
+----------------------------------------+--------------------------------------+
|  Ctrl+b, w                             | Переключение между сессиями и окнами | 
+----------------------------------------+--------------------------------------+ 
|  Ctrl+b, D                             |  Закрыть сессию                      | 
+----------------------------------------+--------------------------------------+
|  tmux attach-session -t название сессии|  Закрыть сессию                      | 
+----------------------------------------+--------------------------------------+
| tmux kill-session -t название сессии   |  Закрыть сессию                      | 
+----------------------------------------+--------------------------------------+
| tmux ls                                |  Закрыть сессию                      | 
+----------------------------------------+--------------------------------------+


По умолчанию создается одно окно на весь экран. В сессии может быть сколько угодно окон.

**Команды для работы с окнами**

:Ctrl+b c : Cоздать новое окно;
:Ctrl+b w : Выбрать окно из списка;
:Ctrl+b 0-9 : Открыть окно по его номеру;
:Ctrl+b : переименовать текущее окно;
:Ctrl+b % : - разделить текущую панель по горизонтали;
:Ctrl+b " : - разделить текущую панель по вертикали;
:Ctrl+b стрелка : - перейти на панель, находящуюся в стороне, куда указывает стрелка;
:Ctrl+b Ctrl+стрелка : - изменить размер текущей панели;
:Ctrl+b o : - перейти на следующую панель;
:Ctrl+b ; : - переключаться между текущей и предыдущей панелью;
:Ctrl+b x : - закрыть текущую панель;


Для изменения размера определенной панели есть следующая комбинация
клавиш:

«Ctrl+B» затем зажимаем Alt и стрелочками изменяем размер.

.. image:: {static}/images/tmux/5.png
    :alt: 05

Для изменения местоположения панели воспользуется комбинацией клавиш
«Ctrl+B» затем «}».

.. image:: {static}/images/tmux/04.png
    :alt: 06



Также есть возможность создать еще одно окно. Для этого предусмотрена
команда «Ctrl+B» «c»

Для просмотра списка окон можно воспользоваться командой «Ctrl+B» «w»

.. image:: {static}/images/tmux/05.png
    :alt: 07


Как видно из скриншота, у нас создалось второе окно. Для удобного
распознавания нужного окна можно присвоить им имена:

.. code:: bash

    tmux rename-window masinc

Также можно воспользоваться командной строкой терминала выполнив команду
«Ctrl+B» «:»

И в командной строке набрать команду «remane-window masinc» (где
«masinc» это новое имя)

Для переименования сессии применяется следующая команда: «tmux
rename-session –t 0 masinc»

-t указывает на номер сессии, если этот параметр опустить будет
переименована существующая сессия.

Для просмотра количества существующих сессий воспользуемся командой

.. code:: bash

    tmux ls

Создадим еще одну сессию tmux, для этого выйдем из существующей сессии:

.. code:: bash

    tmux detach (или Ctrl+B d)

.. code:: bash

    tmux

Посмотрим список созданных сессий:

.. code:: bash

    tmux ls

.. image:: {static}/images/tmux/06.png
    :alt: 06



Для подключения к определенной сессий воспользуемся командой:

.. code:: bash

    tmux a –t masinc

Мы подключились к сесси «masinc».

Для закрытия сессии необходимо закрыть все панели командой «Ctrl+B» «x».
Затем «у» для подтверждения.

Также для завершения сессии можно воспользоваться командой:

.. code:: bash

    tmux kill-session

Для отключения от сессии с сохранением ее работоспособности есть
несколько вариантов:

.. code:: bash

    tmux detach или # tmux d или «Ctrl+B» «d».

Также есть возможность управлять размером окон с помощью мышки. Для
этого в конфигурационный файл /etc/tmux.conf следует добавить следующие
строки:

.. code:: bash

    set -g mouse-resize-pane on

Для применения настроек необходимо перечитать конфигурационный файл

.. code:: bash

    tmux source-file /etc/tmux.conf

Если вы хотите переподключиться к другой сессии выполните команду:

.. code:: bash

    Tmux switch –t `name`

Для прокрутки страницы вверх используйте комбинацию клавиш «Ctrl+B»
«PgUp/PgDwn»

Также очень много удобных дополнительных функций можно добавить внеся
необходимые изменения в конфигурационный файл. Воспользовавшить мануалом
«man tmux» можно получить дополнительную информацию.

“убить” сессию можно следующей командой:

.. code:: bash

    ctrl + d

Создает новую вкладку

.. code:: bash

    ctrl + b

.. code:: bash

    c

переименовать файл можно:

.. code:: bash

    ctrl + b + ,

Выход из тмукса:

.. code:: bash

    ctrl + b + d

Разделить окно по вертикали:

.. code:: bash

    ctrl + b + %

Разделить окно по горизонтали:

.. code:: bash

    ctrl + b + "

Переход между окнами: (к правому окну)

.. code:: bash

    ctrl + b + ->

Открыть диспетчер задач:

.. code:: bash

    htop
  
Контрольныей вопроссы:

1)Что такое tmux? Какие возможности он имеет?
2)Чем различаются сессии и окна?
3)
4)
5)

Задачи:


